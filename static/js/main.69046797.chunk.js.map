{"version":3,"sources":["utils/socket.js","components/Chat/index.js","components/loginBar/index.js","components/Users/index.js","App.js","reportWebVitals.js","index.js"],"names":["socket","io","transports","Chat","useState","msg","setMsg","chatdata","setChatData","isMyself","localStorage","getItem","useEffect","once","data","on","oldMessages","handleClick","date","Date","now","emit","name","message","className","debug","map","index","timeStamp","finalDate","getMinutes","String","getHours","placeholder","value","onChange","event","target","onKeyDown","key","width","height","viewBox","fill","xmlns","onClick","fill-rule","clip-rule","d","fill-opacity","stroke","stroke-linecap","LoginBar","props","userName","setUserName","hasUser","result","console","log","alert","setItem","length","Users","activeUsers","setActiveUsers","users","setUsers","stroke-width","item","App","setHasUser","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.69046797.chunk.js","sourcesContent":["import io from 'socket.io-client'\r\nconst socket = io('http://localhost:2070', {transports: ['websocket','io', 'polling', 'flashsocket']})\r\nexport {socket}","import React,{useEffect, useState, useRef} from \"react\"\r\nimport { socket } from \"../../utils/socket\"\r\nimport \"./style.css\"\r\nimport ScrollToBottom from 'react-scroll-to-bottom';\r\n\r\n\r\nconst Chat = ()=>{\r\n\r\n\r\n    const [msg, setMsg] = useState(\"\")\r\n    const [chatdata, setChatData] = useState([])\r\n    const isMyself = localStorage.getItem(\"name\")\r\n\r\n    useEffect(()=>{\r\n        socket.once('allData', (data)=>{\r\n            setChatData(data)\r\n        })\r\n         socket.on('data_chat_back_one', (data)=>{\r\n            setChatData(oldMessages => ([...oldMessages,data]))\r\n        } ) }, [])\r\n\r\n    function handleChange(event){\r\n        setMsg(event.target.value)\r\n    }\r\n    function handleKeyDown(event){\r\n        if(event.key === 'Enter'){\r\n            handleClick()\r\n        }\r\n    }\r\n    const handleClick = ()=>{\r\n            if(msg){\r\n            let date = Date.now()\r\n            socket.emit(\"msg_from_front\", {\r\n                name: isMyself,\r\n                message: msg,\r\n                date: date\r\n            })\r\n            setMsg(\"\")\r\n        }\r\n    }\r\n    return <div className = \"Chat\">\r\n        <ScrollToBottom debug = {false} className = \"chatWindow\">\r\n            {chatdata.map(({name, message, date}, index)=>{\r\n                const timeStamp = new Date(date)\r\n                const finalDate = timeStamp.getMinutes()>=10?(String(timeStamp.getHours())+\":\"+String(timeStamp.getMinutes())):(String(timeStamp.getHours())+\":0\"+String(timeStamp.getMinutes()))\r\n                return <div className ={(name===isMyself)? \"chatItem myMsg\":\"chatItem\"} key = {index}>\r\n                    <div className = \"dateName\">\r\n                        <span>{(name===isMyself)?\"Вы\":name}</span>\r\n                        <p>{finalDate}</p>\r\n                    </div>\r\n                    <p className = 'message'>{message}</p>\r\n                </div>\r\n            })}\r\n        </ScrollToBottom>\r\n        <div className = \"msgBar\">\r\n            <input className = \"msgInput\" placeholder = \"Ваше сообщение ...\" value = {msg} onChange = {handleChange} onKeyDown = {handleKeyDown} />\r\n            <svg className = \"msgButton\" width=\"61\" height=\"61\" viewBox=\"0 0 61 61\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" onClick = {handleClick} >\r\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M30.9236 60.1274C47.4922 60.1274 60.9236 46.696 60.9236 30.1274C60.9236 13.5589 47.4922 0.127441 30.9236 0.127441C14.3551 0.127441 0.923645 13.5589 0.923645 30.1274C0.923645 46.696 14.3551 60.1274 30.9236 60.1274Z\" fill=\"#DBE6FA\"/>\r\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M38.9236 22.1274L27.9236 33.1274L38.9236 22.1274Z\" fill=\"black\" fill-opacity=\"0.01\"/>\r\n                <path d=\"M38.9236 22.1274L27.9236 33.1274\" stroke=\"#343C4B\"/>\r\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M38.9236 22.1274L31.9236 41.1274L27.9236 33.1274L19.9236 29.1274L38.9236 22.1274Z\" fill=\"black\" fill-opacity=\"0.01\"/>\r\n                <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M38.9236 22.1274L31.9236 41.1274L27.9236 33.1274L19.9236 29.1274L38.9236 22.1274Z\" stroke=\"#343C4B\" stroke-linecap=\"square\"/>\r\n            </svg>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Chat","import React, { useState } from 'react'\r\nimport { socket } from '../../utils/socket'\r\nimport \"./style.css\"\r\n\r\nconst LoginBar = (props)=>{\r\n    let [userName, setUserName] = useState(\"\")\r\n\r\n    function handleChange(event){\r\n        let name = event.target.value\r\n        if(name.length<=15){\r\n            setUserName(name)\r\n        }\r\n        else{\r\n            alert(\"Слишком длинное имя\")\r\n        }\r\n    }\r\n    function handleKeyDown(event){\r\n        if(event.key === 'Enter'){\r\n            handleClick()\r\n        }\r\n    }\r\n    function handleClick(){\r\n        if(!userName){\r\n            alert(\"Вы не ввели имя.\")\r\n            return\r\n        }\r\n        props.hasUser(true)  \r\n        socket.once(\"check_username\", (result)=>{\r\n            console.log(result)\r\n            if(result){\r\n                alert(\"Имя занято, введите другое имя.\")\r\n                props.hasUser(false)  \r\n                localStorage.setItem(\"name\",\"\")\r\n                return\r\n            }\r\n        })\r\n        console.log(userName)\r\n\r\n        localStorage.setItem(\"name\", userName)\r\n        socket.emit('new_user_connected', userName)\r\n    }\r\n    return <div className=\"LoginBar\">\r\n        <h1>\r\n            Friends Chat\r\n        </h1>\r\n        <div className = \"loginGroup\">\r\n            <input placeholder = \"Ваше имя\" \r\n                onChange ={handleChange}\r\n                onKeyDown = {handleKeyDown}\r\n                value = {userName} \r\n            />\r\n            <button onClick = {handleClick}>\r\n                Войти\r\n             </button>  \r\n        </div>\r\n    </div>\r\n\r\n}\r\n\r\n\r\nexport default LoginBar","import React, {useEffect, useState} from \"react\"\r\nimport { socket } from \"../../utils/socket\"\r\nimport \"./style.css\"\r\n\r\nconst Users = ()=>{\r\n    function hadleClick(){\r\n        setActiveUsers(!activeUsers)\r\n    }\r\n    const [activeUsers, setActiveUsers] = useState(false)\r\n    const [users, setUsers] = useState([])\r\n    useEffect(()=>{\r\n        socket.on('online_users', (data)=>{\r\n            setUsers(data)\r\n            console.log(data)\r\n         })}, [])\r\n    return <div className = {activeUsers? \"Users Active\":\"Users\"}>\r\n        <div className = \"userTopBar\">\r\n            <h1>\r\n                Friends Chat\r\n            </h1>\r\n            <svg className = \"MenuButton\" width=\"22\" height=\"16\" viewBox=\"0 0 22 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" onClick = {hadleClick}>\r\n                <path d=\"M0.130859 8.21143L21.4327 8.21143\" stroke=\"white\" stroke-width=\"2\"/>\r\n                <path d=\"M0.130859 1.51294L21.4327 1.51294\" stroke=\"white\" stroke-width=\"2\"/>\r\n                <path d=\"M0.130859 14.9099L21.4327 14.9099\" stroke=\"white\" stroke-width=\"2\"/>\r\n            </svg>\r\n        </div>\r\n       \r\n        <div className = {activeUsers? \"userList Show\":\"userList\"}>\r\n            {users.map((item, index)=>{\r\n                return <div className = \"userItem\" key = {index}>\r\n                    {item.name}\r\n            </div>\r\n        })}\r\n        </div>\r\n\r\n    </div>\r\n}\r\n\r\nexport default Users","import { useEffect, useState } from 'react';\nimport './App.css';\nimport Chat from './components/Chat';\nimport LoginBar from './components/loginBar/index'\nimport Users from './components/Users';\nimport {Fragment} from \"react\"\nimport { socket } from './utils/socket';\n\nfunction App() {\n  const [hasUser, setHasUser] = useState(false)\n  useEffect(()=>{\n    if(localStorage.getItem('name')){\n      socket.emit('new_user_connected', localStorage.getItem('name'))\n      setHasUser(true)\n      }\n    else return\n  },[])\n  return (\n    <div className=\"App\">\n      {hasUser?\n      <Fragment>\n          <Users/>\n          <Chat/>\n        </Fragment>\n        :\n        <LoginBar hasUser = {setHasUser}/> }\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}